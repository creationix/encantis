{
  "kind": "Module",
  "decls": [
    {
      "kind": "ImportDecl",
      "module": "wasi_snapshot_preview1",
      "items": [
        {
          "kind": "ImportItem",
          "name": "fd_read",
          "item": {
            "kind": "ImportFunc",
            "ident": "wasi_fd_read",
            "signature": {
              "kind": "FuncSignature",
              "input": {
                "kind": "CompositeType",
                "fields": [
                  {
                    "kind": "Field",
                    "ident": "fd",
                    "type": {
                      "kind": "PrimitiveType",
                      "name": "i32",
                      "span": {
                        "start": 142,
                        "end": 145
                      }
                    },
                    "span": {
                      "start": 139,
                      "end": 145
                    }
                  },
                  {
                    "kind": "Field",
                    "ident": "iovs",
                    "type": {
                      "kind": "IndexedType",
                      "element": {
                        "kind": "IndexedType",
                        "element": {
                          "kind": "PrimitiveType",
                          "name": "u8",
                          "span": {
                            "start": 156,
                            "end": 158
                          }
                        },
                        "size": null,
                        "specifiers": [],
                        "span": {
                          "start": 154,
                          "end": 158
                        }
                      },
                      "size": null,
                      "specifiers": [],
                      "span": {
                        "start": 152,
                        "end": 158
                      }
                    },
                    "span": {
                      "start": 147,
                      "end": 158
                    }
                  },
                  {
                    "kind": "Field",
                    "ident": "nread",
                    "type": {
                      "kind": "PointerType",
                      "pointee": {
                        "kind": "PrimitiveType",
                        "name": "u32",
                        "span": {
                          "start": 167,
                          "end": 170
                        }
                      },
                      "span": {
                        "start": 166,
                        "end": 170
                      }
                    },
                    "span": {
                      "start": 160,
                      "end": 170
                    }
                  }
                ],
                "span": {
                  "start": 138,
                  "end": 171
                }
              },
              "output": {
                "kind": "PrimitiveType",
                "name": "i32",
                "span": {
                  "start": 175,
                  "end": 178
                }
              },
              "span": {
                "start": 138,
                "end": 178
              }
            },
            "span": {
              "start": 121,
              "end": 178
            }
          },
          "span": {
            "start": 111,
            "end": 178
          }
        },
        {
          "kind": "ImportItem",
          "name": "fd_write",
          "item": {
            "kind": "ImportFunc",
            "ident": "wasi_fd_write",
            "signature": {
              "kind": "FuncSignature",
              "input": {
                "kind": "CompositeType",
                "fields": [
                  {
                    "kind": "Field",
                    "ident": "fd",
                    "type": {
                      "kind": "PrimitiveType",
                      "name": "i32",
                      "span": {
                        "start": 214,
                        "end": 217
                      }
                    },
                    "span": {
                      "start": 211,
                      "end": 217
                    }
                  },
                  {
                    "kind": "Field",
                    "ident": "iovs",
                    "type": {
                      "kind": "IndexedType",
                      "element": {
                        "kind": "IndexedType",
                        "element": {
                          "kind": "PrimitiveType",
                          "name": "u8",
                          "span": {
                            "start": 228,
                            "end": 230
                          }
                        },
                        "size": null,
                        "specifiers": [],
                        "span": {
                          "start": 226,
                          "end": 230
                        }
                      },
                      "size": null,
                      "specifiers": [],
                      "span": {
                        "start": 224,
                        "end": 230
                      }
                    },
                    "span": {
                      "start": 219,
                      "end": 230
                    }
                  },
                  {
                    "kind": "Field",
                    "ident": "nwritten",
                    "type": {
                      "kind": "PointerType",
                      "pointee": {
                        "kind": "PrimitiveType",
                        "name": "u32",
                        "span": {
                          "start": 242,
                          "end": 245
                        }
                      },
                      "span": {
                        "start": 241,
                        "end": 245
                      }
                    },
                    "span": {
                      "start": 232,
                      "end": 245
                    }
                  }
                ],
                "span": {
                  "start": 210,
                  "end": 246
                }
              },
              "output": {
                "kind": "PrimitiveType",
                "name": "i32",
                "span": {
                  "start": 250,
                  "end": 253
                }
              },
              "span": {
                "start": 210,
                "end": 253
              }
            },
            "span": {
              "start": 192,
              "end": 253
            }
          },
          "span": {
            "start": 181,
            "end": 253
          }
        },
        {
          "kind": "ImportItem",
          "name": "proc_exit",
          "item": {
            "kind": "ImportFunc",
            "ident": "wasi_proc_exit",
            "signature": {
              "kind": "FuncSignature",
              "input": {
                "kind": "CompositeType",
                "fields": [
                  {
                    "kind": "Field",
                    "ident": "code",
                    "type": {
                      "kind": "PrimitiveType",
                      "name": "i32",
                      "span": {
                        "start": 293,
                        "end": 296
                      }
                    },
                    "span": {
                      "start": 288,
                      "end": 296
                    }
                  }
                ],
                "span": {
                  "start": 287,
                  "end": 297
                }
              },
              "output": {
                "kind": "CompositeType",
                "fields": [],
                "span": {
                  "start": 287,
                  "end": 297
                }
              },
              "span": {
                "start": 287,
                "end": 297
              }
            },
            "span": {
              "start": 268,
              "end": 297
            }
          },
          "span": {
            "start": 256,
            "end": 297
          }
        }
      ],
      "span": {
        "start": 75,
        "end": 299
      }
    },
    {
      "kind": "DefDecl",
      "ident": "stdin",
      "value": {
        "kind": "AnnotationExpr",
        "expr": {
          "kind": "LiteralExpr",
          "value": {
            "kind": "int",
            "value": "0",
            "radix": 10
          },
          "span": {
            "start": 313,
            "end": 314
          }
        },
        "type": {
          "kind": "PrimitiveType",
          "name": "i32",
          "span": {
            "start": 315,
            "end": 318
          }
        },
        "span": {
          "start": 313,
          "end": 318
        }
      },
      "span": {
        "start": 301,
        "end": 318
      }
    },
    {
      "kind": "DefDecl",
      "ident": "stdout",
      "value": {
        "kind": "AnnotationExpr",
        "expr": {
          "kind": "LiteralExpr",
          "value": {
            "kind": "int",
            "value": "1",
            "radix": 10
          },
          "span": {
            "start": 332,
            "end": 333
          }
        },
        "type": {
          "kind": "PrimitiveType",
          "name": "i32",
          "span": {
            "start": 334,
            "end": 337
          }
        },
        "span": {
          "start": 332,
          "end": 337
        }
      },
      "span": {
        "start": 319,
        "end": 337
      }
    },
    {
      "kind": "DefDecl",
      "ident": "stderr",
      "value": {
        "kind": "AnnotationExpr",
        "expr": {
          "kind": "LiteralExpr",
          "value": {
            "kind": "int",
            "value": "2",
            "radix": 10
          },
          "span": {
            "start": 351,
            "end": 352
          }
        },
        "type": {
          "kind": "PrimitiveType",
          "name": "i32",
          "span": {
            "start": 353,
            "end": 356
          }
        },
        "span": {
          "start": 351,
          "end": 356
        }
      },
      "span": {
        "start": 338,
        "end": 356
      }
    },
    {
      "kind": "ExportDecl",
      "name": "memory",
      "item": {
        "kind": "MemoryDecl",
        "min": 1,
        "max": null,
        "data": [],
        "span": {
          "start": 374,
          "end": 382
        }
      },
      "span": {
        "start": 358,
        "end": 382
      }
    },
    {
      "kind": "GlobalDecl",
      "ident": "iovec",
      "type": {
        "kind": "IndexedType",
        "element": {
          "kind": "PrimitiveType",
          "name": "u8",
          "span": {
            "start": 509,
            "end": 511
          }
        },
        "size": null,
        "specifiers": [],
        "span": {
          "start": 507,
          "end": 511
        }
      },
      "value": {
        "kind": "TupleExpr",
        "elements": [
          {
            "kind": "Arg",
            "name": "ptr",
            "value": {
              "kind": "LiteralExpr",
              "value": {
                "kind": "int",
                "value": "64",
                "radix": 10
              },
              "span": {
                "start": 520,
                "end": 522
              }
            },
            "span": {
              "start": 515,
              "end": 522
            }
          },
          {
            "kind": "Arg",
            "name": "len",
            "value": {
              "kind": "LiteralExpr",
              "value": {
                "kind": "int",
                "value": "0",
                "radix": 10
              },
              "span": {
                "start": 529,
                "end": 530
              }
            },
            "span": {
              "start": 524,
              "end": 530
            }
          }
        ],
        "span": {
          "start": 514,
          "end": 531
        }
      },
      "span": {
        "start": 494,
        "end": 531
      }
    },
    {
      "kind": "DefDecl",
      "ident": "buffer_ptr",
      "value": {
        "kind": "AnnotationExpr",
        "expr": {
          "kind": "LiteralExpr",
          "value": {
            "kind": "int",
            "value": "64",
            "radix": 10
          },
          "span": {
            "start": 608,
            "end": 610
          }
        },
        "type": {
          "kind": "PointerType",
          "pointee": {
            "kind": "PrimitiveType",
            "name": "u8",
            "span": {
              "start": 612,
              "end": 614
            }
          },
          "span": {
            "start": 611,
            "end": 614
          }
        },
        "span": {
          "start": 608,
          "end": 614
        }
      },
      "span": {
        "start": 591,
        "end": 614
      }
    },
    {
      "kind": "DefDecl",
      "ident": "buffer_len",
      "value": {
        "kind": "AnnotationExpr",
        "expr": {
          "kind": "LiteralExpr",
          "value": {
            "kind": "int",
            "value": "1024",
            "radix": 10
          },
          "span": {
            "start": 632,
            "end": 636
          }
        },
        "type": {
          "kind": "PrimitiveType",
          "name": "u32",
          "span": {
            "start": 637,
            "end": 640
          }
        },
        "span": {
          "start": 632,
          "end": 640
        }
      },
      "span": {
        "start": 615,
        "end": 640
      }
    },
    {
      "kind": "ExportDecl",
      "name": "_start",
      "item": {
        "kind": "FuncDecl",
        "inline": false,
        "ident": "main",
        "signature": {
          "kind": "FuncSignature",
          "input": {
            "kind": "CompositeType",
            "fields": [],
            "span": {
              "start": 667,
              "end": 669
            }
          },
          "output": {
            "kind": "CompositeType",
            "fields": [],
            "span": {
              "start": 667,
              "end": 669
            }
          },
          "span": {
            "start": 667,
            "end": 669
          }
        },
        "body": {
          "kind": "Block",
          "stmts": [
            {
              "kind": "LetStmt",
              "pattern": {
                "kind": "IdentPattern",
                "name": "nread",
                "span": {
                  "start": 678,
                  "end": 683
                }
              },
              "type": {
                "kind": "PrimitiveType",
                "name": "u32",
                "span": {
                  "start": 684,
                  "end": 687
                }
              },
              "value": {
                "kind": "LiteralExpr",
                "value": {
                  "kind": "int",
                  "value": "0",
                  "radix": 10
                },
                "span": {
                  "start": 690,
                  "end": 691
                }
              },
              "span": {
                "start": 674,
                "end": 691
              }
            },
            {
              "kind": "LetStmt",
              "pattern": {
                "kind": "IdentPattern",
                "name": "nwritten",
                "span": {
                  "start": 698,
                  "end": 706
                }
              },
              "type": {
                "kind": "PrimitiveType",
                "name": "u32",
                "span": {
                  "start": 707,
                  "end": 710
                }
              },
              "value": {
                "kind": "LiteralExpr",
                "value": {
                  "kind": "int",
                  "value": "0",
                  "radix": 10
                },
                "span": {
                  "start": 713,
                  "end": 714
                }
              },
              "span": {
                "start": 694,
                "end": 714
              }
            },
            {
              "kind": "LoopStmt",
              "body": {
                "kind": "Block",
                "stmts": [
                  {
                    "kind": "AssignmentStmt",
                    "target": {
                      "kind": "IdentExpr",
                      "name": "iovec",
                      "span": {
                        "start": 769,
                        "end": 774
                      }
                    },
                    "op": "=",
                    "value": {
                      "kind": "TupleExpr",
                      "elements": [
                        {
                          "kind": "Arg",
                          "name": "ptr",
                          "value": {
                            "kind": "IdentExpr",
                            "name": "buffer_ptr",
                            "span": {
                              "start": 783,
                              "end": 793
                            }
                          },
                          "span": {
                            "start": 778,
                            "end": 793
                          }
                        },
                        {
                          "kind": "Arg",
                          "name": "len",
                          "value": {
                            "kind": "IdentExpr",
                            "name": "buffer_len",
                            "span": {
                              "start": 800,
                              "end": 810
                            }
                          },
                          "span": {
                            "start": 795,
                            "end": 810
                          }
                        }
                      ],
                      "span": {
                        "start": 777,
                        "end": 811
                      }
                    },
                    "span": {
                      "start": 769,
                      "end": 811
                    }
                  },
                  {
                    "kind": "LetStmt",
                    "pattern": {
                      "kind": "IdentPattern",
                      "name": "res",
                      "span": {
                        "start": 940,
                        "end": 943
                      }
                    },
                    "type": null,
                    "value": {
                      "kind": "CallExpr",
                      "callee": {
                        "kind": "IdentExpr",
                        "name": "wasi_fd_read",
                        "span": {
                          "start": 946,
                          "end": 958
                        }
                      },
                      "args": [
                        {
                          "kind": "Arg",
                          "name": null,
                          "value": {
                            "kind": "IdentExpr",
                            "name": "stdin",
                            "span": {
                              "start": 959,
                              "end": 964
                            }
                          },
                          "span": {
                            "start": 959,
                            "end": 964
                          }
                        },
                        {
                          "kind": "Arg",
                          "name": null,
                          "value": {
                            "kind": "TupleExpr",
                            "elements": [
                              {
                                "kind": "Arg",
                                "name": null,
                                "value": {
                                  "kind": "UnaryExpr",
                                  "op": "&",
                                  "operand": {
                                    "kind": "IdentExpr",
                                    "name": "iovec",
                                    "span": {
                                      "start": 968,
                                      "end": 973
                                    }
                                  },
                                  "span": {
                                    "start": 967,
                                    "end": 973
                                  }
                                },
                                "span": {
                                  "start": 967,
                                  "end": 973
                                }
                              },
                              {
                                "kind": "Arg",
                                "name": null,
                                "value": {
                                  "kind": "LiteralExpr",
                                  "value": {
                                    "kind": "int",
                                    "value": "1",
                                    "radix": 10
                                  },
                                  "span": {
                                    "start": 975,
                                    "end": 976
                                  }
                                },
                                "span": {
                                  "start": 975,
                                  "end": 976
                                }
                              }
                            ],
                            "span": {
                              "start": 966,
                              "end": 977
                            }
                          },
                          "span": {
                            "start": 966,
                            "end": 977
                          }
                        },
                        {
                          "kind": "Arg",
                          "name": null,
                          "value": {
                            "kind": "UnaryExpr",
                            "op": "&",
                            "operand": {
                              "kind": "IdentExpr",
                              "name": "nread",
                              "span": {
                                "start": 980,
                                "end": 985
                              }
                            },
                            "span": {
                              "start": 979,
                              "end": 985
                            }
                          },
                          "span": {
                            "start": 979,
                            "end": 985
                          }
                        }
                      ],
                      "span": {
                        "start": 946,
                        "end": 986
                      }
                    },
                    "span": {
                      "start": 936,
                      "end": 986
                    }
                  },
                  {
                    "kind": "BreakStmt",
                    "when": {
                      "kind": "BinaryExpr",
                      "op": "!=",
                      "left": {
                        "kind": "IdentExpr",
                        "name": "res",
                        "span": {
                          "start": 1002,
                          "end": 1005
                        }
                      },
                      "right": {
                        "kind": "LiteralExpr",
                        "value": {
                          "kind": "int",
                          "value": "0",
                          "radix": 10
                        },
                        "span": {
                          "start": 1009,
                          "end": 1010
                        }
                      },
                      "span": {
                        "start": 1002,
                        "end": 1010
                      }
                    },
                    "span": {
                      "start": 991,
                      "end": 1010
                    }
                  },
                  {
                    "kind": "BreakStmt",
                    "when": {
                      "kind": "BinaryExpr",
                      "op": "==",
                      "left": {
                        "kind": "IdentExpr",
                        "name": "nread",
                        "span": {
                          "start": 1026,
                          "end": 1031
                        }
                      },
                      "right": {
                        "kind": "LiteralExpr",
                        "value": {
                          "kind": "int",
                          "value": "0",
                          "radix": 10
                        },
                        "span": {
                          "start": 1035,
                          "end": 1036
                        }
                      },
                      "span": {
                        "start": 1026,
                        "end": 1036
                      }
                    },
                    "span": {
                      "start": 1015,
                      "end": 1036
                    }
                  },
                  {
                    "kind": "AssignmentStmt",
                    "target": {
                      "kind": "MemberExpr",
                      "object": {
                        "kind": "IdentExpr",
                        "name": "iovec",
                        "span": {
                          "start": 1090,
                          "end": 1095
                        }
                      },
                      "member": {
                        "kind": "field",
                        "name": "len"
                      },
                      "span": {
                        "start": 1090,
                        "end": 1099
                      }
                    },
                    "op": "=",
                    "value": {
                      "kind": "IdentExpr",
                      "name": "nread",
                      "span": {
                        "start": 1102,
                        "end": 1107
                      }
                    },
                    "span": {
                      "start": 1090,
                      "end": 1107
                    }
                  },
                  {
                    "kind": "SetStmt",
                    "pattern": {
                      "kind": "IdentPattern",
                      "name": "res",
                      "span": {
                        "start": 1150,
                        "end": 1153
                      }
                    },
                    "type": null,
                    "value": {
                      "kind": "CallExpr",
                      "callee": {
                        "kind": "IdentExpr",
                        "name": "wasi_fd_write",
                        "span": {
                          "start": 1156,
                          "end": 1169
                        }
                      },
                      "args": [
                        {
                          "kind": "Arg",
                          "name": null,
                          "value": {
                            "kind": "IdentExpr",
                            "name": "stdout",
                            "span": {
                              "start": 1170,
                              "end": 1176
                            }
                          },
                          "span": {
                            "start": 1170,
                            "end": 1176
                          }
                        },
                        {
                          "kind": "Arg",
                          "name": null,
                          "value": {
                            "kind": "TupleExpr",
                            "elements": [
                              {
                                "kind": "Arg",
                                "name": null,
                                "value": {
                                  "kind": "UnaryExpr",
                                  "op": "&",
                                  "operand": {
                                    "kind": "IdentExpr",
                                    "name": "iovec",
                                    "span": {
                                      "start": 1180,
                                      "end": 1185
                                    }
                                  },
                                  "span": {
                                    "start": 1179,
                                    "end": 1185
                                  }
                                },
                                "span": {
                                  "start": 1179,
                                  "end": 1185
                                }
                              },
                              {
                                "kind": "Arg",
                                "name": null,
                                "value": {
                                  "kind": "LiteralExpr",
                                  "value": {
                                    "kind": "int",
                                    "value": "1",
                                    "radix": 10
                                  },
                                  "span": {
                                    "start": 1187,
                                    "end": 1188
                                  }
                                },
                                "span": {
                                  "start": 1187,
                                  "end": 1188
                                }
                              }
                            ],
                            "span": {
                              "start": 1178,
                              "end": 1189
                            }
                          },
                          "span": {
                            "start": 1178,
                            "end": 1189
                          }
                        },
                        {
                          "kind": "Arg",
                          "name": null,
                          "value": {
                            "kind": "UnaryExpr",
                            "op": "&",
                            "operand": {
                              "kind": "IdentExpr",
                              "name": "nwritten",
                              "span": {
                                "start": 1192,
                                "end": 1200
                              }
                            },
                            "span": {
                              "start": 1191,
                              "end": 1200
                            }
                          },
                          "span": {
                            "start": 1191,
                            "end": 1200
                          }
                        }
                      ],
                      "span": {
                        "start": 1156,
                        "end": 1201
                      }
                    },
                    "span": {
                      "start": 1146,
                      "end": 1201
                    }
                  },
                  {
                    "kind": "BreakStmt",
                    "when": {
                      "kind": "BinaryExpr",
                      "op": "!=",
                      "left": {
                        "kind": "IdentExpr",
                        "name": "res",
                        "span": {
                          "start": 1217,
                          "end": 1220
                        }
                      },
                      "right": {
                        "kind": "LiteralExpr",
                        "value": {
                          "kind": "int",
                          "value": "0",
                          "radix": 10
                        },
                        "span": {
                          "start": 1224,
                          "end": 1225
                        }
                      },
                      "span": {
                        "start": 1217,
                        "end": 1225
                      }
                    },
                    "span": {
                      "start": 1206,
                      "end": 1225
                    }
                  },
                  {
                    "kind": "SetStmt",
                    "pattern": {
                      "kind": "IdentPattern",
                      "name": "res",
                      "span": {
                        "start": 1273,
                        "end": 1276
                      }
                    },
                    "type": null,
                    "value": {
                      "kind": "CallExpr",
                      "callee": {
                        "kind": "IdentExpr",
                        "name": "wasi_fd_write",
                        "span": {
                          "start": 1279,
                          "end": 1292
                        }
                      },
                      "args": [
                        {
                          "kind": "Arg",
                          "name": null,
                          "value": {
                            "kind": "IdentExpr",
                            "name": "stderr",
                            "span": {
                              "start": 1293,
                              "end": 1299
                            }
                          },
                          "span": {
                            "start": 1293,
                            "end": 1299
                          }
                        },
                        {
                          "kind": "Arg",
                          "name": null,
                          "value": {
                            "kind": "TupleExpr",
                            "elements": [
                              {
                                "kind": "Arg",
                                "name": null,
                                "value": {
                                  "kind": "UnaryExpr",
                                  "op": "&",
                                  "operand": {
                                    "kind": "IdentExpr",
                                    "name": "iovec",
                                    "span": {
                                      "start": 1303,
                                      "end": 1308
                                    }
                                  },
                                  "span": {
                                    "start": 1302,
                                    "end": 1308
                                  }
                                },
                                "span": {
                                  "start": 1302,
                                  "end": 1308
                                }
                              },
                              {
                                "kind": "Arg",
                                "name": null,
                                "value": {
                                  "kind": "LiteralExpr",
                                  "value": {
                                    "kind": "int",
                                    "value": "1",
                                    "radix": 10
                                  },
                                  "span": {
                                    "start": 1310,
                                    "end": 1311
                                  }
                                },
                                "span": {
                                  "start": 1310,
                                  "end": 1311
                                }
                              }
                            ],
                            "span": {
                              "start": 1301,
                              "end": 1312
                            }
                          },
                          "span": {
                            "start": 1301,
                            "end": 1312
                          }
                        },
                        {
                          "kind": "Arg",
                          "name": null,
                          "value": {
                            "kind": "UnaryExpr",
                            "op": "&",
                            "operand": {
                              "kind": "IdentExpr",
                              "name": "nwritten",
                              "span": {
                                "start": 1315,
                                "end": 1323
                              }
                            },
                            "span": {
                              "start": 1314,
                              "end": 1323
                            }
                          },
                          "span": {
                            "start": 1314,
                            "end": 1323
                          }
                        }
                      ],
                      "span": {
                        "start": 1279,
                        "end": 1324
                      }
                    },
                    "span": {
                      "start": 1269,
                      "end": 1324
                    }
                  },
                  {
                    "kind": "BreakStmt",
                    "when": {
                      "kind": "BinaryExpr",
                      "op": "!=",
                      "left": {
                        "kind": "IdentExpr",
                        "name": "res",
                        "span": {
                          "start": 1340,
                          "end": 1343
                        }
                      },
                      "right": {
                        "kind": "LiteralExpr",
                        "value": {
                          "kind": "int",
                          "value": "0",
                          "radix": 10
                        },
                        "span": {
                          "start": 1347,
                          "end": 1348
                        }
                      },
                      "span": {
                        "start": 1340,
                        "end": 1348
                      }
                    },
                    "span": {
                      "start": 1329,
                      "end": 1348
                    }
                  }
                ],
                "span": {
                  "start": 723,
                  "end": 1352
                }
              },
              "span": {
                "start": 718,
                "end": 1352
              }
            }
          ],
          "span": {
            "start": 670,
            "end": 1354
          }
        },
        "span": {
          "start": 658,
          "end": 1354
        }
      },
      "span": {
        "start": 642,
        "end": 1354
      }
    }
  ],
  "span": {
    "start": 75,
    "end": 1355
  }
}