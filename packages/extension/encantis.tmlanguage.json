{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "encantis",
  "patterns": [
    {
      "include": "#comments"
    },
    {
      "include": "#keywords"
    },
    {
      "include": "#operators"
    },
    {
      "include": "#strings"
    },
    {
      "include": "#constants"
    },
    {
      "include": "#variables"
    }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.double-slash.encantis",
          "begin": "//",
          "end": "\n"
        },
        {
          "name": "comment.block.encantis",
          "begin": "/\\*",
          "end": "\\*/"
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.arrow.encantis",
          "match": "\\->|=>"
        },
        {
          "name": "keyword.operator.logical.encantis",
          "match": "&&|\\|\\||!(?!=)"
        },
        {
          "name": "keyword.operator.assignment.augmented.encantis",
          "match": "<<<=|>>>=|\\+\\|=|-\\|=|\\*\\|=|%=|&=|\\*=|\\+=|-=|/=|\\^=|\\|=|<<=|>>="
        },
        {
          "name": "keyword.operator.bitwise.encantis",
          "match": "<<<|>>>|<<|>>|&|\\^|\\|"
        },
        {
          "name": "keyword.operator.comparison.encantis",
          "match": "<=|<|>=|>"
        },
        {
          "name": "keyword.operator.comparison.encantis",
          "match": "==|!="
        },
        {
          "name": "keyword.operator.assignment.encantis",
          "match": "="
        },
        {
          "name": "punctuation.definition.typeparameters.begin.encantis",
          "match": "\\["
        },
        {
          "name": "punctuation.definition.typeparameters.end.encantis",
          "match": "\\]"
        },
        {
          "comment": "Bracket type: many-pointer marker",
          "name": "storage.modifier.pointer.encantis",
          "match": "(?<=\\[)\\*"
        },
        {
          "comment": "Bracket type: framing markers",
          "name": "storage.modifier.framing.encantis",
          "match": "(?<=\\[\\*?[0-9_]*)[!?]+"
        },
        {
          "comment": "Bracket type: inferred length",
          "name": "keyword.other.placeholder.encantis",
          "match": "(?<=\\[\\*?)_(?=[!?]*\\])"
        },
        {
          "name": "keyword.operator.arithmetic.encantis",
          "match": "\\+\\||-\\||\\*\\||/|%|\\*|\\+|-"
        }
      ]
    },
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.loop.encantis",
          "match": "\\b(loop|while|for|in)(?![a-zA-Z0-9_-])"
        },
        {
          "name": "keyword.control.conditional.encantis",
          "match": "\\b(if|elif|else|when|match)(?![a-zA-Z0-9_-])"
        },
        {
          "name": "keyword.control.flow.encantis",
          "match": "\\b(return|break|continue)(?![a-zA-Z0-9_-])"
        },
        {
          "name": "storage.type.encantis",
          "match": "\\b(func|builtin|inline|memory|import|export|def|type|enum|global|let|set|as|input|output|mut)(?![a-zA-Z0-9_-])"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.other.hex.encantis",
          "begin": "x\"",
          "end": "\""
        },
        {
          "name": "string.quoted.other.base64.encantis",
          "begin": "b\"",
          "end": "\""
        },
        {
          "name": "string.quoted.single.encantis",
          "begin": "'",
          "end": "'",
          "patterns": [{ "include": "#escape-sequences" }]
        },
        {
          "name": "string.quoted.double.encantis",
          "begin": "\"",
          "end": "\"",
          "patterns": [{ "include": "#escape-sequences" }]
        }
      ]
    },
    "escape-sequences": {
      "patterns": [
        {
          "name": "constant.character.escape.hex.encantis",
          "match": "\\\\x[0-9a-fA-F]{2}"
        },
        {
          "name": "constant.character.escape.encantis",
          "match": "\\\\[ntr\\\\\"']"
        }
      ]
    },
    "constants": {
      "patterns": [
        {
          "name": "constant.language.boolean.encantis",
          "match": "\\b(true|false)(?![a-zA-Z0-9_-])"
        },
        {
          "name": "constant.numeric.hex.encantis",
          "match": "-?0x[0-9a-fA-F]+(?![a-zA-Z0-9_-])"
        },
        {
          "name": "constant.numeric.binary.encantis",
          "match": "-?0b[01]+(?![a-zA-Z0-9_-])"
        },
        {
          "name": "constant.numeric.octal.encantis",
          "match": "-?0o[0-7]+(?![a-zA-Z0-9_-])"
        },
        {
          "name": "constant.numeric.dozenal.encantis",
          "match": "-?0d[0-9a-bA-B]+(?![a-zA-Z0-9_-])"
        },
        {
          "name": "constant.numeric.float.encantis",
          "match": "-?[0-9]+\\.[0-9]+([eE][+-]?[0-9]+)?(?![a-zA-Z0-9_-])"
        },
        {
          "name": "constant.numeric.decimal.encantis",
          "match": "-?[0-9]+(?![a-zA-Z0-9_-])"
        }
      ]
    },
    "variables": {
      "patterns": [
        {
          "name": "entity.name.type.encantis",
          "match": "\\b(u8|i8|u16|i16|u32|i32|u64|i64|u128|i128|u256|i256|f32|f64|bool)(?![a-zA-Z0-9_-])"
        },
        {
          "name": "support.type.builtin.encantis",
          "match": "\\b(str|bytes)(?![a-zA-Z0-9_-])"
        },
        {
          "name": "support.type.comptime.encantis",
          "match": "\\b(int|float)(?=\\s*\\()"
        },
        {
          "name": "support.type.nominal.encantis",
          "match": "@[A-Z][0-9A-Za-z_-]*"
        },
        {
          "name": "support.type.encantis",
          "match": "\\b([A-Z][0-9A-Za-z_-]*)"
        },
        {
          "name": "support.function.encantis",
          "match": "\\b(sizeof|memset|memcpy|sqrt|abs|ceil|floor|trunc|nearest|min|max|copysign|clz|ctz|popcnt|memory-size|memory-grow)(?![a-zA-Z0-9_-])"
        },
        {
          "name": "punctuation.accessor.tuple.encantis",
          "match": "(?<=[a-zA-Z0-9_-])\\.[0-9]+"
        },
        {
          "name": "punctuation.accessor.typepun.encantis",
          "match": "(?<=[a-zA-Z0-9_*\\]])\\.(u8|i8|u16|i16|u32|i32|u64|i64|u128|i128|u256|i256|f32|f64|bool)(?![a-zA-Z0-9_-])",
          "captures": {
            "1": { "name": "entity.name.type.encantis" }
          }
        },
        {
          "name": "punctuation.accessor.typepun.user.encantis",
          "match": "(?<=[a-zA-Z0-9_*\\]])\\.[A-Z][0-9A-Za-z_-]*",
          "captures": {
            "0": { "name": "support.type.encantis" }
          }
        },
        {
          "name": "punctuation.accessor.method.encantis",
          "match": "(?<=[a-zA-Z0-9_*\\]))])\\.([a-z][0-9A-Za-z_-]*)(?=\\()",
          "captures": {
            "1": { "name": "entity.name.function.encantis" }
          }
        },
        {
          "name": "punctuation.accessor.property.encantis",
          "match": "(?<=[a-zA-Z0-9_-])\\.[a-z][0-9A-Za-z_-]*"
        },
        {
          "name": "punctuation.accessor.pointer.encantis",
          "match": "(?<=[a-zA-Z0-9_-])\\.\\*"
        },
        {
          "name": "variable.other.encantis",
          "match": "\\b[a-z][0-9A-Za-z_-]*"
        }
      ]
    }
  },
  "scopeName": "source.encantis"
}
